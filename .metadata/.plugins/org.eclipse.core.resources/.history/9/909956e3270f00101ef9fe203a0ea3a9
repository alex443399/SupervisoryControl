import "Cart model/Cart brain.cif", "Cart model/Location_barcode_sensor.cif";

group def M1(Cart_brain brain; Location_barcode_sensor location_barcode_sensor):

    requirement brain.start_l needs location_barcode_sensor.on_top_of_barcode;
    requirement brain.start_r needs location_barcode_sensor.on_top_of_barcode;

    requirement brain.start_lifting needs location_barcode_sensor.on_top_of_barcode;
    requirement brain.start_lowering needs location_barcode_sensor.on_top_of_barcode;

end

requirement def M2(Cart_brain brain):

    location idle: initial; marked;
        edge brain.start_fw, brain.start_l, brain.start_r goto moving; // Cart is moving
        edge brain.start_lifting, brain.start_lowering goto using_lifter; // Cart using lifting mechanism
    location using_lifter:
        edge brain.stop_lifting, brain.stop_lowering goto idle; // Lifting mechanism no longer in use
    location moving:
        edge stop_fw, stop_l, stop_r goto idle; // stops moving
end
