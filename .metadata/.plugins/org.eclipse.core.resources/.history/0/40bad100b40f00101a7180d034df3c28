import "Cart model/Cart brain.cif";

requirement def L3(Cart_brain brain):
    location idle:initial;marked;
        edge brain.request_storage goto requesting_storage;
        edge brain.request_picking goto requesting_picking;
        edge brain.request_charging goto requesting_charging;
    location requesting_storage:
        edge brain.granted_storage, brain.denied_storage goto idle;
    location requesting_picking:
        edge brain.granted_picking, brain.denied_picking goto idle;
    location requesting_charging:
        edge brain.granted_charging, brain.denied_charging goto idle;
end

requirement def L4(Cart_brain brain):

    location inactive:initial;marked;
        edge brain.start_fw, brain.start_l, brain.start_r, brain.stop_fw goto busy; // We can only move when not requesting
        edge brain.start_lifting, brain.start_lowering goto busy; // We can only move when not requesting

        edge brain.request_storage, brain.request_picking, brain.request_charging goto requesting;
    location busy:
        edge brain.stop_fw, brain.stop_l, brain.stop_r goto inactive;
    location requesting:
        edge brain.granted_storage, brain.granted_picking, brain.granted_charging goto inactive;
        edge brain.denied_storage, brain.denied_picking, brain.denied_charging goto not_requesting;
end
