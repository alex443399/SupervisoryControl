event emergency_breaks, emergency_over;

import "Cart.cif";

plant def DC_motor(Cart cart):
    // The cart variable is the Cart that the DC_motor belogs to, it is how it gets the shared variables and events

    //disc int count = 0;
    location idle:
        initial;
        edge cart.start_fw goto moving_forward;
        edge cart.start_r goto turning_right;
        edge cart.start_l goto turning_left;
//         edge emergency_breaks goto estop;
        // edge emergency_breaks when count < 3 do count := count + 1 goto estop; example with variables
    location moving_forward:
        edge cart.stop_fw goto idle;
//         edge emergency_breaks goto estop;
    location turning_right:
        edge cart.stop_r goto idle;
//         edge emergency_breaks goto estop;
    location turning_left:
        edge cart.stop_l goto idle;
//         edge emergency_breaks goto estop;
//     location estop:
//         edge emergency_over goto idle;
end

