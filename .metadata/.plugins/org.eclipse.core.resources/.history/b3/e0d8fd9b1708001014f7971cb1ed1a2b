// event emergency_breaks, emergency_over;

import "Cart.cif";

group def DC_motor(Cart cart):
    // The cart variable is the Cart that the DC_motor belogs to, it is how it gets the shared variables and events

    plant keep_track_of_direction:
        location idle:
            initial; marked;
            edge cart.start_fw goto moving_forward;
            edge cart.start_r goto turning_right;
            edge cart.start_l goto turning_left;
    //         edge emergency_breaks goto estop;
        location moving_forward:
            edge cart.stop_fw goto idle;
    //         edge emergency_breaks goto estop;
        location turning_right:
            edge cart.stop_r goto idle;
    //         edge emergency_breaks goto estop;
        location turning_left:
            edge cart.stop_l goto idle;
    //         edge emergency_breaks goto estop;
    //     location estop:
    //         edge emergency_over goto idle;
    end
end

